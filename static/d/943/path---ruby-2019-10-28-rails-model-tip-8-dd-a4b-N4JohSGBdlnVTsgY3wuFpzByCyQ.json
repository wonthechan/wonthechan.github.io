{"data":{"site":{"siteMetadata":{"title":"chan's devlog","author":"wonthechan (Yechan Lim)","siteUrl":"https://wonthechan.github.io","comment":{"disqusShortName":"","utterances":"wonthechan/wonthechan.github.io"}}},"markdownRemark":{"id":"5ee44454-0ef0-5eb4-8feb-e02660871344","excerpt":"이미 만들어둔 모델에 새로운 컬럼을 추가하는 법을 몰라서 필요할때마다 destroy 하고 모델을 다시 생성하는 식으로 했는데.. 번거롭기도 하고 이건 뭔가 아닌거 같아서 구글링해보니 방법이 바로 나왔다.! Active Record Migrations 이미 만들어둔 모델의 이름이  Post 이고 새로 추가하려는 컬럼의 이름이  title 이라면 이런식으로 하면 된다. 실행 후에는 db 폴더내에 새로운 마이그레이션 rb…","html":"<p>이미 만들어둔 모델에 새로운 컬럼을 추가하는 법을 몰라서 필요할때마다 destroy 하고 모델을 다시 생성하는 식으로 했는데.. 번거롭기도 하고 이건 뭔가 아닌거 같아서 구글링해보니 방법이 바로 나왔다.!</p>\n<h2 id=\"active-record-migrations\"><a href=\"#active-record-migrations\" aria-label=\"active record migrations permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Active Record Migrations</h2>\n<p>이미 만들어둔 모델의 이름이 <strong>Post</strong>이고 새로 추가하려는 컬럼의 이름이 <strong>title</strong>이라면</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">rails g migration <span class=\"token constant\">AddTitleToPost</span> title<span class=\"token symbol\">:string</span></code></pre></div>\n<p>이런식으로 하면 된다. 실행 후에는 db 폴더내에 새로운 마이그레이션 rb 파일이 생긴다.</p>\n<p>최종적으로 적용을 위해서는 마이그레이션을 다시 진행해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rake db:migrate</code></pre></div>\n<p><strong>(추가) 이미 존재하는 컬럼의 default 값을 설정 하고 싶은 경우</strong></p>\n<ol>\n<li>마이그레이션 파일을 생성한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">rails g migration <span class=\"token constant\">SetDefault</span></code></pre></div>\n<ol start=\"2\">\n<li>아래의 형식에 맞춰 파일을 작성한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SetDefault</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">ActiveRecord</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Migration</span>\n  <span class=\"token keyword\">def</span> change\n    change_column <span class=\"token symbol\">:table_name</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:column_name</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:type</span><span class=\"token punctuation\">,</span> default<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Your value\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<ol start=\"3\">\n<li>변경 적용을 위해 마이그레이션 진행</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">rake db<span class=\"token symbol\">:migrate</span></code></pre></div>\n<blockquote>\n<p>References</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14371633/adding-more-fields-to-an-existing-model\">https://stackoverflow.com/questions/14371633/adding-more-fields-to-an-existing-model</a> </li>\n<li><a href=\"https://relaxwrighting.tistory.com/entry/RUBY-ON-RAILS-Model-%EC%88%98%EC%A0%95-%EC%BB%AC%EB%9F%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">https://relaxwrighting.tistory.com/entry/RUBY-ON-RAILS-Model-%EC%88%98%EC%A0%95-%EC%BB%AC%EB%9F%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0</a> </li>\n<li><a href=\"https://guides.rubyonrails.org/active_record_migrations.html\">https://guides.rubyonrails.org/active<em>record</em>migrations.html</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/1186400/how-to-set-default-values-in-rails?rq=1\">https://stackoverflow.com/questions/1186400/how-to-set-default-values-in-rails?rq=1</a> </li>\n</ul>\n</blockquote>","fields":{"slug":"/ruby/2019-10-28-rails-model-tip/"},"frontmatter":{"title":"[RoR] 모델(Model) 업데이트 Tip - 컬럼(column) 관련","date":"October 29, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/ruby/2019-10-28-rails-model-tip/","previous":{"fields":{"slug":"/ruby/2019-10-28-rails-goormide-tip/"},"frontmatter":{"title":"[RoR] 구름 IDE에서 Ruby on Rails 사용하기 - 초기 설정법","category":"ruby"}},"next":{"fields":{"slug":"/ruby/2019-11-05-rails-model-associations-tip/"},"frontmatter":{"title":"[RoR] 레일즈에서 One-to-many Association 생성하기","category":"ruby"}}}}